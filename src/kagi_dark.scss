@use "sass:color";

$border-radius: 12px;
$accent-color: rgb(255 255 255 / 10%);

// Gray Google-ish variant
// $background-color: #202124;
// $footer-bg: #171717;

// Brave-ish variant
$background-color: #17191e;
$header-bg: #1a1c23;
$widget-bg: #1e2028;
$footer-bg: #1e2028;

// Common styles
:root {
  --search-result-gap: 32px;
  --font-mono: MonoLisa, monospace;
  --font-code: MonoLisa, Monaco, monospace;

  a:focus-visible {
    outline: 2px solid var(--color-primary_hover);
    border-radius: 5px;
  }

  .correctedQuery a {
    color: var(--search-result-title);
  }

  .k_ui_dropdown_data_list {
    padding: 0;
    border-radius: $border-radius;

    .list_items {
      border-radius: $border-radius;
      margin-bottom: 0;

      & > a {
        padding: 6px 25px !important;
        border-radius: 0;

        &:hover {
          border-radius: unset !important;
        }
      }
    }

    hr {
      margin: 0;
    }
  }

  .__srgi-title a:visited:hover {
    border-bottom: 1px solid var(--color-primary_visited);
  }

  .__sri-title .__sri_title_link:visited:hover {
    color: var(--color-primary_visited);
    border-bottom: 1px solid var(--color-primary_visited);
  }

  ._0_more_search_box {
    border-radius: inherit;
  }

  ._0_more_search_user_bangs_list {
    padding-bottom: 0;
  }

  ._0_more_search_box_share_button {
    margin-bottom: 0;

    a {
      color: currentColor;
    }
  }

  ._0_img-results .item img {
    object-fit: cover;
  }

  .videoResultItem,
  ._0_img-results .item,
  .newsResultItem .newsResultBody .newsResultImage img {
    border-radius: $border-radius;
  }

  ._0_img-results .item .imageInfo > div.b {
    background: linear-gradient(
                    360deg,
                    rgb(0 0 0 / 60%) 0,
                    rgb(0 0 0 / 0%) 100%
    );
  }

  ._0_img-results .item .imageInfo > div.t {
    background: linear-gradient(
                    360deg,
                    rgb(0 0 0 / 0%) 0,
                    rgb(0 0 0 / 60%) 100%
    );
  }

  .sri-group .__dl {
    padding-bottom: 0;
  }

  .main-footer {
    padding-bottom: 2rem;
  }

  ._0_queryInfo {
    padding: 0;
  }

  // yeah, they got typo...
  ._0_page-seperator {
    border-bottom: 1px dashed var(--color-primary-dim_1);
  }

  .related-searches:empty {
    margin-top: 30px;
  }

  .mob {
    .auto_item {
      padding: 6px 10px;
    }
  }

  ._0_rank-icons {
    margin-top: 0;
  }

  .box:hover {
    outline-width: 1px;
    outline-color: var(--color-primary_hover);
  }

  .auto_suggestions .auto_suggestions_lenses {
    border-top-width: 1px;
    margin-top: 0;
  }

  .wikipediaRelatedSection .wikipediaRelatedItems {
    gap: 1.5rem;
    justify-content: start;

    a:hover {
      color: var(--wiki-content-links);
    }
  }

  #mm-image {
    .img-min-max-sub {
      margin: 10px 0;
    }
  }

  ._0_more_search_user_bang_item {
    transition: unset;
  }

  // consistent dropdown colors
  ._0_more_search_user_bang_item._0__active,
  ._0_more_search_user_bang_item:hover,
  ._0_more_search_box_customize_button:hover,
  ._0_more_search_options_box:hover,
  ._0_more_search_box_share_button:hover {
    color: var(--dd-hover-color);
    background-color: var(--dd-hover-bg);
  }
}

// Override dark theme
.theme_moon_dark {
  --background-color: #{$background-color};
  --footer-bg: #{$footer-bg};
  --header-bg: #{$header-bg};
  --control-center-bg: var(--background-color);
  --filter-dd-bg: var(--background-color);
  --not-found-bubble-bg: var(--footer-bg);
  --result-item-title-border: var(--background-color);
  --result-item-title-visited-border: var(--background-color);
  --result-item-title-border_hover: var(--search-result-title);
  --search-result-date-bg: rgb(255 255 255 / 15%);
  --search-result-date-new-bg: rgb(255 255 255 / 15%);
  --cheatsh_background: #{$accent-color};
  --kagi-accent: #{$accent-color};
  --tabs-round-bg: #{$accent-color};
  --dd-hover-bg: #{$accent-color};
  --inline-widget-bg: #{$widget-bg};
  --dd-list-input-bg: #{$accent-color};
  --control-center-dd-list-bg_hover: #{$accent-color};
  --related-item-bg: #{$accent-color};
  --btn-group-bg: #{$accent-color};
  --video-item-bg: #{$accent-color};
  --search-result-title: #8ab4f8;
  --color_link: var(--search-result-title);
  --color-primary_visited: #c58af9;
  --search-result-title-hover: var(--search-result-title);
  --color-primary_hover: var(--search-result-title-hover);
  --wiki-content-links: var(--search-result-title);
  --m_sri_gap_color: var(--background-color);
  --site_info_bg: var(--background-color);
  --site_info_bottom_bg: transparent;
  --btn-primary-color: var(--inline-widget-bg);
  --quick-search-bg: var(--color-primary-dim_9);
  --quick-search-icon: var(--color-secondary);

  .clipboardCopy ._0_copied_tooltip {
    background-color: rgb(13 13 14 / 90%);
  }

  // width overwritten in :root
  .auto_suggestions .auto_suggestions_lenses {
    border-top: 1px solid var(--color-primary-dim_3);
  }

  .mob {
    #m_wiki {
      color: var(--color-secondary-dim_6);

      .collapse-icon {
        color: var(--color-primary);
      }

      .wiki-content a {
        text-decoration: underline;
      }
    }
  }
}

// Override light theme
.theme_calm_blue {
  --m_sri_gap_color: var(--background-color);
  --quick-search-bg: var(--color-primary-dim_6);
  --search-result-title: #1a0dab;
  --color_link: var(--search-result-title);
  --color-primary_visited: #681da8;
  --search-result-title-hover: var(--search-result-title);
}

// Dark mode discuss with AI page
// FIXME: overriding light mode, because it's the only one available by Kagi
html[data-path="/discussdoc"] {
  color-scheme: dark;

  // existing variables
  --background-color: #{$background-color};
  --color-primary: rgb(255 255 255);
  --color-primary-dim_5: rgb(255 255 255 / 50%);
  --color_link: #8ab4f8;
  --color-primary_hover: #8ab4f8;
  --color-primary_visited: #c58af9;

  // custom variables
  $color-accent: #58a6ff;

  --ai_chat_buble_q_bg: #{color.adjust($color-accent, $lightness: -20%)};
  --ai_chat_buble_q_text: var(--color-primary);
  --ai_chat_buble_a_bg: #{$widget-bg};
  --ai_chat_buble_a_text: var(--color-primary);
  --ai_chat_input_text: var(--color-primary);
  --ai_chat_input_button: var(--color-primary-dim_5);

  .closeBtn {
    color: var(--color-primary);
    background: none;
  }
}
